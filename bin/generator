#!/usr/bin/env php
<?php

$path = file_exists('vendor/autoload.php') ? 'vendor/autoload.php' : '../../../autoload.php';

require_once $path;

use Del\Common\ContainerService;
use Del\Common\Config\DbCredentials;
use Del\Generator\ClearBuildsCommand;
use Del\Generator\GeneratorCommand;
use Symfony\Component\Console\Application;
use Symfony\Component\Console\Helper\HelperSet;
use Symfony\Component\Console\Helper\QuestionHelper;

$dbConfig = require_once 'migrant-cfg.php';
$containerSvc = ContainerService::getInstance();
$credentials = new DbCredentials($dbConfig['db']);
$helperSet = new HelperSet();
$helperSet->set(new QuestionHelper());
$generatorCommand = new GeneratorCommand();
$clearCommand = new ClearBuildsCommand();

$app = new Application('Entity Generator');
$app->setHelperSet($helperSet);
$app->add($generatorCommand);
$app->add($clearCommand);
$app->run();